<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <style>
        .jumbotron {
            background-color: #e6ffe6;
            text-align: center;
        }
    </style>
</head>

<body>
<div id="elm-app-is-loaded-here"></div>

<script src="node_modules/jquery/dist/jquery.min.js"></script>

<script src="elm.js"></script>
<script>
    const files = [ "./data/53265202.json",
                    "./data/53414533.json",
                    "./data/53556494.json",
                    "./data/53833455.json",
                    "./data/54608094.json" ];

    var filesData = [];

    console.log(filesData)

    $.when(
        $.each(files, function(i, item) {
            $.getJSON(item, function(data) {
                filesData.push(data)
            })
        })
    ).done(setFlags(filesData))

    function setFlags(data) {
        console.log(data)

        var app = Elm.Main.init({
            node: document.getElementById("elm-app-is-loaded-here"),
            flags: data
        });
    }
</script>
</body>
</html>