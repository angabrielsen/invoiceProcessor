<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <style>
        .jumbotron {
            background-color: #e6ffe6;
            text-align: center;
        }
    </style>
</head>

<body>
<div id="elm-app-is-loaded-here"></div>

<script src="node_modules/jquery/dist/jquery.min.js"></script>

<script src="elm.js"></script>
<script>
    const files = [ "./data/53265202.json",
                    "./data/53414533.json",
                    "./data/53556494.json",
                    "./data/53833455.json",
                    "./data/54608094.json" ];

    const filesData = [];

    $.each(files, function(i, item) {
        jQuery.getJSON(item, function (data) {
            var arr = [];

            for (let step = 0; step < 1; step++) {
                arr.push(data)

                console.log("arr1: ", arr)
            }

            setFlags(arr)

            console.log("arr2: ", arr)
        });
    });

    console.log("filesData: ", filesData, "length: ", filesData.length)

    function setFlags(data) {
        var app = Elm.Main.init({
            node: document.getElementById("elm-app-is-loaded-here"),
            flags: data
        });
    }
</script>
</body>
</html>